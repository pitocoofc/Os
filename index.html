<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Nexus OS - Kernel</title>
<link rel="stylesheet" href="style.css">
</head>
<body class="bg-space">

<div id="toast"></div>

<!-- Loading e Crash -->
<div id="loading-overlay"><div>Carregando nÃºcleo...</div></div>
<div id="crash-screen">
    <h1 style="color:red">RAM_OVERFLOW_ERROR</h1>
    <p style="margin:20px">O sistema excedeu 4.0GB de memÃ³ria RAM.</p>
    <button onclick="location.reload()" style="padding:15px; background:black; color:white; border-radius:8px;">Hard Reboot</button>
</div>

<!-- Dev Panel -->
<div id="dev-trigger" onclick="toggleDevPanel()"></div>
<div id="dev-panel">
    <h3 style="margin-bottom:20px; color: #6200ee;">Nexus Dev Panel</h3>
    <div class="dev-opt" onclick="ramLock()">âš ï¸ RAM Lock (Crash)</div>
    <div class="dev-opt" onclick="window.location='term.html'">ğŸ“Ÿ Terminal</div>
    <div class="dev-opt" onclick="window.location='chat.html'">ğŸ¤– Nexus IA</div>
    <div class="dev-opt" onclick="toggleDevPanel()">âœ– Fechar Painel</div>
</div>

<!-- Lock Screen -->
<div id="lock-screen" class="bg-space">
    <h1 id="clock" style="font-size: 60px;">00:00</h1>
    <button onclick="this.parentElement.style.display='none'" style="margin-top:20px; padding:10px 30px; border-radius:20px; color:white; background:none; border:1px solid white;">Entrar</button>
</div>

<!-- Home Screen -->
<div id="home-screen">
    <div class="app-icon" onclick="window.location='conf.html'"><div class="icon-box">âš™ï¸</div><span>Ajustes</span></div>
    <div class="app-icon" onclick="window.location='files.html'"><div class="icon-box">ğŸ“</div><span>Arquivos</span></div>
    <div class="app-icon" onclick="window.location='notas.html'"><div class="icon-box">ğŸ“</div><span>Notas</span></div>
</div>

<!-- Multitarefa -->
<div id="multitask-screen">
    <button onclick="clearRAM()" style="margin-bottom: 20px; padding: 10px 25px; border-radius: 25px; border: none; background: #ff4757; color: white; font-weight: bold;">Limpar Tudo</button>
    <div id="task-list"></div>
</div>

<!-- Navbar -->
<div id="navbar">
    <div class="nav-btn" onclick="goHome()">â—</div>
    <div class="nav-btn" onclick="goHome()">â—‹</div>
    <div class="nav-btn" onclick="toggleMultitask()">â˜</div>
</div>

<script>
let config = { isDevMode: false, devClicks: 0 };
let ram = 0.0;
let openApps = [];

setInterval(() => {
    const now = new Date();
    document.getElementById('clock').innerText = now.getHours().toString().padStart(2,'0') + ":" + now.getMinutes().toString().padStart(2,'0');
}, 1000);

function showToast(text) {
    const t = document.getElementById('toast');
    t.innerText = text; t.style.display = 'block';
    setTimeout(() => t.style.display = 'none', 2000);
}

function tryActivateDev() {
    config.devClicks++;
    if (config.devClicks < 3) {
        showToast(`Passos para Dev: ${3 - config.devClicks}`);
    } else if (config.devClicks === 3) {
        config.isDevMode = true;
        document.getElementById('dev-trigger').style.display = 'block';
        showToast("Modo Desenvolvedor Ativado!");
    }
}

function toggleDevPanel() {
    if(config.isDevMode) document.getElementById('dev-panel').classList.toggle('active');
}

function ramLock() {
    ram = 4.1;
    document.getElementById('crash-screen').style.display = 'flex';
}

function toggleMultitask() {
    const m = document.getElementById('multitask-screen');
    const list = document.getElementById('task-list');
    if(m.style.display === 'flex') {
        m.style.display = 'none';
    } else {
        list.innerHTML = '';
        openApps.forEach(app => {
            const card = document.createElement('div');
            card.className = 'task-card';
            card.innerHTML = `<div class="task-header"><span>${app.toUpperCase()}</span></div>
                              <div class="task-body" onclick="window.location='${app}.html'">ğŸ“±</div>`;
            list.appendChild(card);
        });
        m.style.display = 'flex';
    }
}

function clearRAM() { openApps = []; ram = 0; goHome(); }
function goHome() { document.getElementById('multitask-screen').style.display = 'none'; }
</script>
</body>
</html>
